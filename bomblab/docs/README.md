# 32bit_Bomb-lab

## Dependencies

The only dependencies are:
- [Docker](https://www.docker.com)
- [Docker-Compose](https://docs.docker.com/compose)

Assumming you are on Ubuntu or another debian based distro, you can install those dependencies with the following:

```bash
# Install docker and docker-compose
curl https://get.docker.com/ | sh
sudo apt update && sudo apt install -y docker-compose

# Enable docker on reboot, and start docker engine
sudo systemctl enable docker
sudo systemctl start docker

# Add current user to the docker group
sudo usermod -aG docker ${USER} 
```

After running this you may need to log out, and log back in so your user can be properly added to the docker
group (so they can run docker).

## Directory Structure

There are a couple of important files that will be useful for debugging, and helping students.

```
bomblab/ 
├── [2.2K]  log.txt         # Event log that is updated every 30 seconds
├── [6.3K]  log-status.txt  # Grading server error log
├── [14]    scores.txt      # Scores for each student
├── [132K]  bombs/          # Directory containing information on all generated bomblabs
```

#### bombs

As students generate bomblabs, their source along with solutions will be saved to `bomblab/bombs`.
If you know the bombid for the student, you can navigate to their source through the [bombs](SERVICES.md#bombs) 
service.

```
bomb522622142/
├── [ 25K]  bomb*           # Copy of bomblab (student recieved in tar archive)
├── [3.8K]  bomb.c          # Contains main function (student recieved in tar archive)
├── [ 20K]  bomb-quiet*     # Copy of bomblab that does not report to grade server (used to verify solutions)
├── [   5]  ID              # NetID of bomblab owner
├── [  21]  PASSWORD        # Random password for verifying event authenticity
├── [9.0K]  phases.c        # Source for the different phases students need to reverse
├── [  43]  README          # Simple description of challenge (student recieved in tar archive)
└── [ 104]  solution.txt    # Solution generated by the server
```

## Services

All the micro services are now containerized and defined in [docker-compose](https://docs.docker.com/compose/).

You can read detailed descriptions of each service [here](SERVICES.md).

## Deploy Instructions

There are only a few things you must configure.

- [DNS](DNS.md)
- [Environment Variables](ENV.md)
- netids.json - a json file containg an array of valid netids (used to validate
netids when bomblab is requested)

A more detailed description of how all the pieces of the deploy fit together can be found by 
reading through the descriptions of all the [services](SERVICES.md).

Once those things are configured, you should be able to just run the deploy script in the `bomblab` directory as such:

```bash
./deploy.sh
```

## Maintainers

- [John Cunniff](mailto:john@osiris.cyber.nyu.edu)
- [Jaime Danguillecourt](mailto:jaime@osiris.cyber.nyu.edu)
